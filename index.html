<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Оплата музыкальных занятий</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            width: 100%;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .description {
            color: #7f8c8d;
            font-size: 16px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .content-wrapper {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            width: 100%;
        }
        
        .info-section {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .payment-section {
            flex: 1;
            min-width: 300px;
        }
        
        .info-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .info-list {
            list-style-type: none;
        }
        
        .info-list li {
            padding: 12px 0;
            border-bottom: 1px solid #f5f5f5;
            display: flex;
            align-items: center;
        }
        
        .info-list li:last-child {
            border-bottom: none;
        }
        
        .info-icon {
            background-color: #e8f4fc;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            color: #3498db;
            font-weight: bold;
        }
        
        .payment-form-container {
            background-color: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            width: 100%;
        }
        
        .payment-form-container h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .form-notice {
            background-color: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .payment-form-wrapper {
            position: relative;
        }
        
        .payment-form-wrapper iframe {
            width: 100%;
            border: none;
            min-height: 500px;
            border-radius: 8px;
        }
        
        footer {
            margin-top: 40px;
            text-align: center;
            color: #95a5a6;
            font-size: 14px;
            width: 100%;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }
        
        @media (max-width: 768px) {
            .content-wrapper {
                flex-direction: column;
            }
            
            .info-section, .payment-section {
                width: 100%;
            }
            
            body {
                padding: 15px;
            }
        }
        
        .success-message {
            display: none;
            background-color: #d4edda;
            color: #155724;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            border: 1px solid #c3e6cb;
        }
        
        .error-message {
            display: none;
            background-color: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Оплата музыкальных занятий</h1>
            <p class="description">Заполните форму ниже для оплаты индивидуальных или групповых музыкальных занятий. После оплаты вы получите подтверждение на указанный email.</p>
        </header>
        
        <div class="content-wrapper">
            <div class="info-section">
                <h2>Информация об оплате</h2>
                <ul class="info-list">
                    <li>
                        <div class="info-icon">1</div>
                        <div>
                            <strong>Выберите сумму</strong>
                            <div style="font-size: 14px; color: #7f8c8d; margin-top: 3px;">Укажите сумму оплаты в рублях</div>
                        </div>
                    </li>
                    <li>
                        <div class="info-icon">2</div>
                        <div>
                            <strong>Заполните контактные данные</strong>
                            <div style="font-size: 14px; color: #7f8c8d; margin-top: 3px;">Укажите телефон и ФИО для связи</div>
                        </div>
                    </li>
                    <li>
                        <div class="info-icon">3</div>
                        <div>
                            <strong>Добавьте комментарий (при необходимости)</strong>
                            <div style="font-size: 14px; color: #7f8c8d; margin-top: 3px;">Укажите пожелания или особенности</div>
                        </div>
                    </li>
                    <li>
                        <div class="info-icon">4</div>
                        <div>
                            <strong>Оплатите через ЮKassa</strong>
                            <div style="font-size: 14px; color: #7f8c8d; margin-top: 3px;">Безопасный платёж банковской картой</div>
                        </div>
                    </li>
                </ul>
                
                <div class="form-notice">
                    <strong>Важно:</strong> После оплаты вы будете перенаправлены обратно на эту страницу. Сохраните номер транзакции для подтверждения оплаты.
                </div>
            </div>
            
            <div class="payment-section">
                <div class="payment-form-container">
                    <h2>Форма оплаты</h2>
                    
                    <div class="form-notice">
                        Платёжная форма загружается из безопасного источника. Если форма не отображается, проверьте настройки безопасности браузера.
                    </div>
                    
                    <div class="payment-form-wrapper">
                        <!-- Здесь будет вставлена форма ЮKassa -->
                        <div id="yookassa-form-container">
                            <div class="loading">
                                <p>Загрузка платёжной формы...</p>
                            </div>
                        </div>
                    </div>
                    
                    <div id="success-message" class="success-message">
                        <h3>Оплата успешно завершена!</h3>
                        <p>Спасибо за оплату. Мы свяжемся с вами в ближайшее время для уточнения деталей занятий.</p>
                    </div>
                    
                    <div id="error-message" class="error-message">
                        <h3>Произошла ошибка при оплате</h3>
                        <p>Пожалуйста, попробуйте ещё раз или свяжитесь с нами для альтернативных способов оплаты.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>© 2023 Музыкальные занятия. Все права защищены.</p>
            <p>По вопросам оплаты обращайтесь: example@email.com</p>
        </footer>
    </div>

    <!-- Форма ЮKassa -->
    <div id="yookassa-form-html" style="display: none;">
        <br><link rel="stylesheet" href="https://yookassa.ru/integration/simplepay/css/yookassa_construct_form.css?v=1.31.0">
        <form class="yoomoney-payment-form" action="https://yookassa.ru/integration/simplepay/payment" method="post" accept-charset="utf-8" >

            <div class="ym-products ym-display-none">
            <div class="ym-block-title ym-products-title">Товары</div>

            <div class="ym-product">
                    <div class="ym-product-line">
                        <span class="ym-product-description"><span class="ym-product-count">1×</span>Музыкальные занятия</span>
                        <span class="ym-product-price" data-price="0.0" data-id="550" data-count="1">0,00&nbsp;₽</span>
                    </div>
                    
                <input disabled="" type="hidden" name="text" value="Музыкальные занятия"><input disabled="" type="hidden" name="price" value="0.0"><input disabled="" type="hidden" name="quantity" value="1"><input disabled="" type="hidden" name="paymentSubjectType" value="commodity"><input disabled="" type="hidden" name="paymentMethodType" value="full_prepayment"><input disabled="" type="hidden" name="tax" value="1"></div></div>
            <input value="" type="hidden" name="ym_merchant_receipt">

            <div class="ym-customer-info">
                <div class="ym-block-title">О покупателе</div>
                
                <input name="cps_phone" class="ym-input" placeholder="Телефон" type="text" value="">
                <input name="custName" class="ym-input" placeholder="ФИО" type="text" value="">
                
                
                <textarea class="ym-textarea" name="orderDetails" placeholder="Комментарий" value=""></textarea>
            </div>

            <div class="ym-hidden-inputs">
               <input name="shopSuccessURL" type="hidden" value="https://3drums.github.io/?status=success">
               
               
            </div>

            <input name="customerNumber" type="hidden" value="Оплачивая занятия Вы соглашаетесь с обработкой персональных данных.">
            <input name="sumEqualPrice" type="hidden" value="true">
            <div class="ym-payment-btn-block ym-before-line ym-align-space-between">
                <div class="ym-input-icon-rub">
                    <input name="sum" placeholder="0.00" class="ym-input ym-sum-input ym-required-input" type="number" step="any">
                </div>
                <button data-text="Заплатить" class="ym-btn-pay ym-result-price"><span class="ym-text-crop">Заплатить</span> <span class="ym-price-output"></span></button><img src="https://yookassa.ru/integration/simplepay/img/iokassa-gray.svg?v=1.31.0" class="ym-logo" width="114" height="27" alt="ЮKassa">
            </div>
        <input name="shopId" type="hidden" value="1243739"></form>
        <script src="https://yookassa.ru/integration/simplepay/js/yookassa_construct_form.js?v=1.31.0"></script>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Вставляем форму ЮKassa в контейнер
            const formContainer = document.getElementById('yookassa-form-container');
            const formHtml = document.getElementById('yookassa-form-html').innerHTML;
            formContainer.innerHTML = formHtml;
            
            // Проверяем статус оплаты из URL
            const urlParams = new URLSearchParams(window.location.search);
            const status = urlParams.get('status');
            
            if (status === 'success') {
                document.getElementById('success-message').style.display = 'block';
                document.getElementById('error-message').style.display = 'none';
                
                // Прокручиваем к сообщению об успехе
                setTimeout(() => {
                    document.getElementById('success-message').scrollIntoView({ behavior: 'smooth' });
                }, 500);
            } else if (status === 'error') {
                document.getElementById('success-message').style.display = 'none';
                document.getElementById('error-message').style.display = 'block';
                
                // Прокручиваем к сообщению об ошибке
                setTimeout(() => {
                    document.getElementById('error-message').scrollIntoView({ behavior: 'smooth' });
                }, 500);
            }
            
            // Добавляем обработчик для отправки формы
            document.addEventListener('submit', function(e) {
                if (e.target && e.target.classList.contains('yoomoney-payment-form')) {
                    console.log('Форма отправлена на ЮKassa');
                    // Здесь можно добавить дополнительную логику перед отправкой
                }
            });
        });
    </script>
</body>
</html>
