<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–ø–ª–∞—Ç–∞ —É—Å–ª—É–≥–∏ | –ÆKassa</title>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –û–†–ò–ì–ò–ù–ê–õ–¨–ù–´–ï —Å—Ç–∏–ª–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã –ÆKassa -->
    <link rel="stylesheet" href="https://yookassa.ru/integration/simplepay/css/yookassa_construct_form.css?v=1.31.0">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .payment-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #333;
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #666;
            font-size: 16px;
        }
        
        .security-badge {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 14px;
        }
        
        .security-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        @media (max-width: 600px) {
            .payment-card {
                padding: 25px;
            }
            
            .security-badge {
                flex-direction: column;
                gap: 10px;
            }
            
            .ym-payment-btn-block {
                flex-direction: column !important;
            }
            
            .ym-sum-input {
                width: 100% !important;
                margin-bottom: 15px;
            }
            
            .ym-btn-pay {
                width: 100% !important;
            }
        }
        
        /* –£–ª—É—á—à–∞–µ–º —Å—Ç–∏–ª–∏ —Ñ–æ—Ä–º—ã –ÆKassa */
        .yoomoney-payment-form {
            margin: 0;
        }
        
        .ym-input {
            border: 2px solid #e0e0e0 !important;
            border-radius: 10px !important;
            padding: 12px 15px !important;
            font-size: 16px !important;
        }
        
        .ym-input:focus {
            border-color: #4CAF50 !important;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1) !important;
        }
        
        .ym-btn-pay {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%) !important;
            border-radius: 10px !important;
            font-weight: 600 !important;
            transition: transform 0.2s, box-shadow 0.2s !important;
        }
        
        .ym-btn-pay:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 10px 20px rgba(76, 175, 80, 0.3) !important;
        }
        
        /* –°—Ç–∏–ª—å –¥–ª—è –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ */
        .error-border {
            border-color: #ff4444 !important;
            background-color: #fff8f8 !important;
        }
        
        .error-message {
            color: #ff4444;
            font-size: 13px;
            margin-top: 5px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="payment-card">
        <div class="header">
            <h1>üí≥ –û–ø–ª–∞—Ç–∞ —É—Å–ª—É–≥–∏</h1>
            <p>–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ —á–µ—Ä–µ–∑ –ÆKassa</p>
        </div>
        
        <!-- –û–†–ò–ì–ò–ù–ê–õ–¨–ù–ê–Ø –§–û–†–ú–ê –ÆKassa -->
        <form class="yoomoney-payment-form" action="https://yookassa.ru/integration/simplepay/payment" method="post" accept-charset="utf-8" id="paymentForm">
            
            <!-- –°–∫—Ä—ã—Ç—ã–π –±–ª–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ -->
            <div class="ym-products ym-display-none">
                <div class="ym-block-title ym-products-title">–¢–æ–≤–∞—Ä—ã</div>
                <div class="ym-product">
                    <div class="ym-product-line">
                        <span class="ym-product-description">
                            <span class="ym-product-count">1√ó</span>
                        </span>
                        <span class="ym-product-price" data-price="0.0" data-id="488" data-count="1">
                            0,00&nbsp;‚ÇΩ
                        </span>
                    </div>
                    <input disabled type="hidden" name="text" value="">
                    <input disabled type="hidden" name="price" value="0.0">
                    <input disabled type="hidden" name="quantity" value="1">
                    <input disabled type="hidden" name="paymentSubjectType" value="commodity">
                    <input disabled type="hidden" name="paymentMethodType" value="full_prepayment">
                    <input disabled type="hidden" name="tax" value="1">
                </div>
            </div>
            
            <input value="" type="hidden" name="ym_merchant_receipt">
            
            <!-- –ë–ª–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ -->
            <div class="ym-customer-info">
                <div class="ym-block-title">–î–∞–Ω–Ω—ã–µ –¥–ª—è –æ–ø–ª–∞—Ç—ã</div>
                
                <!-- –ü–æ–ª–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
                <div style="margin-bottom: 15px;">
                    <input name="cps_phone" 
                           id="phoneInput"
                           class="ym-input" 
                           placeholder="–¢–µ–ª–µ—Ñ–æ–Ω (—Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã, –Ω–∞—á–∏–Ω–∞—è —Å 8)" 
                           type="tel" 
                           value=""
                           maxlength="11"
                           pattern="8[0-9]{10}"
                           title="–í–≤–µ–¥–∏—Ç–µ 11 —Ü–∏—Ñ—Ä, –Ω–∞—á–∏–Ω–∞—è —Å 8"
                           required>
                    <div id="phoneError" class="error-message">
                        –í–≤–µ–¥–∏—Ç–µ —Ä–æ–≤–Ω–æ 11 —Ü–∏—Ñ—Ä, –Ω–æ–º–µ—Ä –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å 8
                    </div>
                </div>
                
                <input name="custName" 
                       class="ym-input" 
                       placeholder="–§–ò–û *" 
                       type="text" 
                       value=""
                       required>
            </div>
            
            <div class="ym-hidden-inputs"></div>
            
            <input name="sumEqualPrice" type="hidden" value="true">
            
            <!-- –ë–ª–æ–∫ —Å —Å—É–º–º–æ–π –∏ –∫–Ω–æ–ø–∫–æ–π –æ–ø–ª–∞—Ç—ã -->
            <div class="ym-payment-btn-block ym-before-line ym-align-space-between">
                <div class="ym-input-icon-rub">
                    <input name="sum" 
                           placeholder="0.00" 
                           class="ym-input ym-sum-input ym-required-input" 
                           type="number" 
                           step="any"
                           min="1"
                           required>
                </div>
                <button data-text="–ó–∞–ø–ª–∞—Ç–∏—Ç—å" 
                        class="ym-btn-pay ym-result-price" 
                        type="submit">
                    <span class="ym-text-crop">–ó–∞–ø–ª–∞—Ç–∏—Ç—å</span> 
                    <span class="ym-price-output"></span>
                </button>
                <img src="https://yookassa.ru/integration/simplepay/img/iokassa-gray.svg?v=1.31.0" 
                     class="ym-logo" 
                     width="114" 
                     height="27" 
                     alt="–ÆKassa">
            </div>
            
            <!-- –í–ê–ñ–ù–û: –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à shopId -->
            <input name="shopId" type="hidden" value="1243739">
        </form>
        
        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ -->
        <div class="security-badge">
            <div class="security-item">
                üîí <span>SSL-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</span>
            </div>
            <div class="security-item">
                ‚úÖ <span>Visa / Mastercard / –ú–ò–†</span>
            </div>
            <div class="security-item">
                ‚ö° <span>–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ–ø–ª–∞—Ç–∞</span>
            </div>
        </div>
    </div>
    
    <!-- –û–†–ò–ì–ò–ù–ê–õ–¨–ù–´–ô –°–ö–†–ò–ü–¢ –ÆKassa -->
    <script src="https://yookassa.ru/integration/simplepay/js/yookassa_construct_form.js?v=1.31.0"></script>
    
    <!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const phoneInput = document.getElementById('phoneInput');
            const phoneError = document.getElementById('phoneError');
            const form = document.getElementById('paymentForm');
            
            // 1. –†–∞–∑—Ä–µ—à–∞–µ–º –≤–≤–æ–¥ —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä
            phoneInput.addEventListener('input', function(e) {
                // –£–¥–∞–ª—è–µ–º –≤—Å–µ –Ω–µ—Ü–∏—Ñ—Ä–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã
                let value = e.target.value.replace(/\D/g, '');
                
                // –ï—Å–ª–∏ –Ω–æ–º–µ—Ä –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 8, –¥–æ–±–∞–≤–ª—è–µ–º 8
                if (value.length > 0 && value[0] !== '8') {
                    value = '8' + value;
                }
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º 11 —Ü–∏—Ñ—Ä–∞–º–∏
                if (value.length > 11) {
                    value = value.substring(0, 11);
                }
                
                e.target.value = value;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
                validatePhone();
            });
            
            // 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Ñ–æ–∫—É—Å–∞
            phoneInput.addEventListener('blur', function() {
                validatePhone();
            });
            
            // 3. –§—É–Ω–∫—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
            function validatePhone() {
                const value = phoneInput.value;
                const isValid = /^8\d{10}$/.test(value);
                
                if (value && !isValid) {
                    phoneInput.classList.add('error-border');
                    phoneError.style.display = 'block';
                    return false;
                } else {
                    phoneInput.classList.remove('error-border');
                    phoneError.style.display = 'none';
                    return true;
                }
            }
            
            // 4. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã
            form.addEventListener('submit', function(e) {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–ª–µ—Ñ–æ–Ω
                const phoneValue = phoneInput.value;
                const isPhoneValid = /^8\d{10}$/.test(phoneValue);
                
                if (!isPhoneValid) {
                    e.preventDefault();
                    phoneInput.classList.add('error-border');
                    phoneError.style.display = 'block';
                    phoneInput.focus();
                    
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:\n' +
                          '‚Ä¢ –¢–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã\n' +
                          '‚Ä¢ –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 8\n' +
                          '‚Ä¢ –í—Å–µ–≥–æ 11 —Ü–∏—Ñ—Ä\n' +
                          '–ü—Ä–∏–º–µ—Ä: 89991234567');
                    return false;
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É–º–º—É
                const amountInput = document.querySelector('input[name="sum"]');
                if (amountInput) {
                    const amount = parseFloat(amountInput.value);
                    if (amount < 1) {
                        e.preventDefault();
                        alert('–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞: 1 —Ä—É–±–ª—å');
                        amountInput.focus();
                        return false;
                    }
                    if (amount > 1000000) {
                        e.preventDefault();
                        alert('–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞: 1 000 000 —Ä—É–±–ª–µ–π');
                        amountInput.focus();
                        return false;
                    }
                }
                
                // –ï—Å–ª–∏ –Ω—É–∂–µ–Ω —Ñ–æ—Ä–º–∞—Ç +7 –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ (–ÆKassa –æ–∂–∏–¥–∞–µ—Ç +7)
                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º 8XXXXXXXXXX –≤ +7XXXXXXXXXX
                phoneInput.value = '+7' + phoneValue.substring(1);
                
                return true;
            });
            
            // 5. –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—É–º–º—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
            const amountInput = document.querySelector('input[name="sum"]');
            if (amountInput) {
                amountInput.addEventListener('input', updateButtonPrice);
                
                function updateButtonPrice() {
                    const priceOutput = document.querySelector('.ym-price-output');
                    if (priceOutput && amountInput.value) {
                        const amount = parseFloat(amountInput.value);
                        if (!isNaN(amount) && amount > 0) {
                            const formatted = amount.toLocaleString('ru-RU', {
                                minimumFractionDigits: 2,
                                maximumFractionDigits: 2
                            });
                            priceOutput.textContent = formatted + ' ‚ÇΩ';
                        } else {
                            priceOutput.textContent = '';
                        }
                    }
                }
                
                updateButtonPrice();
            }
            
            // 6. –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
            phoneInput.addEventListener('focus', function() {
                if (!this.value) {
                    this.placeholder = '–ü—Ä–∏–º–µ—Ä: 89991234567';
                }
            });
            
            phoneInput.addEventListener('blur', function() {
                this.placeholder = '–¢–µ–ª–µ—Ñ–æ–Ω (—Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã, –Ω–∞—á–∏–Ω–∞—è —Å 8)';
            });
            
            // 7. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ)
            // –ü—Ä–∏ –≤–≤–æ–¥–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ—Å—Ç–æ —Ü–∏—Ñ—Ä—ã, –Ω–æ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É
            phoneInput.addEventListener('focus', function() {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
                const currentValue = this.value;
                
                // –ï—Å–ª–∏ –µ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤ —á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
                if (currentValue && /^8\d{10}$/.test(currentValue)) {
                    const formatted = currentValue.replace(/^(\d{1})(\d{3})(\d{3})(\d{2})(\d{2})$/, 
                        '+$1 ($2) $3-$4-$5');
                    this.value = formatted;
                }
            });
            
            phoneInput.addEventListener('blur', function() {
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ —Ü–∏—Ñ—Ä–æ–≤–æ–π —Ñ–æ—Ä–º–∞—Ç
                const currentValue = this.value.replace(/\D/g, '');
                if (currentValue.length === 11 && currentValue[0] === '8') {
                    this.value = currentValue;
                }
            });
        });
    </script>
</body>
</html>
